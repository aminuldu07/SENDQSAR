<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Perform Cross-Validation with Random Forest and Feature Importance Calculation — get_rf_model_output_cv_imp • SENDQSAR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Perform Cross-Validation with Random Forest and Feature Importance Calculation — get_rf_model_output_cv_imp"><meta name="description" content="This function performs cross-validation on a Random Forest model, tracks
performance metrics (such as sensitivity, specificity, accuracy), handles
indeterminate predictions, and computes feature importance based on either
Gini or Accuracy. The function returns performance summaries and feature
importance rankings after a specified number of test repetitions."><meta property="og:description" content="This function performs cross-validation on a Random Forest model, tracks
performance metrics (such as sensitivity, specificity, accuracy), handles
indeterminate predictions, and computes feature importance based on either
Gini or Accuracy. The function returns performance summaries and feature
importance rankings after a specified number of test repetitions."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SENDQSAR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/get_compile_data.html">get_compile_data</a></li>
    <li><a class="dropdown-item" href="../articles/get_bw_score.html">get_bw_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_livertobw_score.html">get_livertobw_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_lb_score.html">get_lb_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_mi_score.html">get_mi_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_liver_om_lb_mi_tox_score_list.html">get_liver_om_lb_mi_tox_score_list</a></li>
    <li><a class="dropdown-item" href="../articles/get_col_harmonized_scores_df.html">get_col_harmonized_scores_df</a></li>
    <li><a class="dropdown-item" href="../articles/get_ml_data_and_tuned_hyperparameters.html">get_ml_data_and_tuned_hyperparameters</a></li>
    <li><a class="dropdown-item" href="../articles/get_rf_model_with_cv.html">get_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_zone_exclusioned_rf_model_with_cv.html">get_zone_exclusioned_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_imp_features_from_rf_model_with_cv.html">get_imp_features_from_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_auc_curve_with_rf_model.html">get_auc_curve_with_rf_model</a></li>
    <li><a class="dropdown-item" href="../articles/get_histogram_barplot.html">get_histogram_barplot</a></li>
    <li><a class="dropdown-item" href="../articles/get_reprtree_from_rf_model.html">get_reprtree_from_rf_model</a></li>
    <li><a class="dropdown-item" href="../articles/get_prediction_plot.html">get_prediction_plot</a></li>
    <li><a class="dropdown-item" href="../articles/get_Data_formatted_for_ml_and_best.m.html">get_Data_formatted_for_ml_and_best.m</a></li>
    <li><a class="dropdown-item" href="../articles/get_rf_input_param_list_output_cv_imp.html">get_rf_input_param_list_output_cv_imp</a></li>
    <li><a class="dropdown-item" href="../articles/get_zone_exclusioned_rf_model_cv_imp.html">get_zone_exclusioned_rf_model_cv_imp</a></li>
    <li><a class="dropdown-item" href="../articles/get_repeat_dose_parallel_studyids.html">get_repeat_dose_parallel_studyids</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/aminuldu07/SENDQSAR" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Perform Cross-Validation with Random Forest and Feature Importance Calculation</h1>
      <small class="dont-index">Source: <a href="https://github.com/aminuldu07/SENDQSAR/blob/HEAD/R/get_zone_exclusioned_rf_model_cv_imp.R" class="external-link"><code>R/get_zone_exclusioned_rf_model_cv_imp.R</code></a></small>
      <div class="d-none name"><code>get_rf_model_output_cv_imp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function performs cross-validation on a Random Forest model, tracks
performance metrics (such as sensitivity, specificity, accuracy), handles
indeterminate predictions, and computes feature importance based on either
Gini or Accuracy. The function returns performance summaries and feature
importance rankings after a specified number of test repetitions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_rf_model_output_cv_imp</span><span class="op">(</span></span>
<span>  scores_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Undersample <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  best.m <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">testReps</span>,</span>
<span>  <span class="va">indeterminateUpper</span>,</span>
<span>  <span class="va">indeterminateLower</span>,</span>
<span>  <span class="va">Type</span>,</span>
<span>  <span class="va">nTopImportance</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-scores-df">scores_df<a class="anchor" aria-label="anchor" href="#arg-scores-df"></a></dt>
<dd><p>A data frame containing the features and target variable for training and testing the model.</p></dd>


<dt id="arg-undersample">Undersample<a class="anchor" aria-label="anchor" href="#arg-undersample"></a></dt>
<dd><p>A logical flag indicating whether to apply undersampling to the training data. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-best-m">best.m<a class="anchor" aria-label="anchor" href="#arg-best-m"></a></dt>
<dd><p>A numeric value representing the number of features to sample for the Random Forest model, or <code>NULL</code> to calculate it automatically.</p></dd>


<dt id="arg-testreps">testReps<a class="anchor" aria-label="anchor" href="#arg-testreps"></a></dt>
<dd><p>An integer specifying the number of repetitions for cross-validation. Must be at least 2.</p></dd>


<dt id="arg-indeterminateupper">indeterminateUpper<a class="anchor" aria-label="anchor" href="#arg-indeterminateupper"></a></dt>
<dd><p>A numeric threshold above which predictions are not considered indeterminate.</p></dd>


<dt id="arg-indeterminatelower">indeterminateLower<a class="anchor" aria-label="anchor" href="#arg-indeterminatelower"></a></dt>
<dd><p>A numeric threshold below which predictions are not considered indeterminate.</p></dd>


<dt id="arg-type">Type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>An integer specifying the type of importance to compute. <code>1</code> for MeanDecreaseAccuracy, <code>2</code> for MeanDecreaseGini.</p></dd>


<dt id="arg-ntopimportance">nTopImportance<a class="anchor" aria-label="anchor" href="#arg-ntopimportance"></a></dt>
<dd><p>An integer specifying the number of top features to display based on their importance scores.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following elements:</p><dl><dt>performance_metrics</dt>
<dd><p>A vector of aggregated performance metrics (e.g., sensitivity, specificity, accuracy, etc.).</p></dd>

<dt>feature_importance</dt>
<dd><p>A matrix containing the importance of the top <code>nTopImportance</code> features, ordered by their importance score.</p></dd>

<dt>raw_results</dt>
<dd><p>A list containing raw results for debugging or further analysis, including sensitivity, specificity, accuracy, and Gini scores across all test repetitions.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function splits the input data into training and testing sets based on the specified number of test repetitions (<code>testReps</code>).
During each iteration, it trains a Random Forest model and makes predictions on the test data. Indeterminate predictions are handled
by marking them as <code>NA</code>. The function tracks performance metrics such as sensitivity, specificity, and accuracy, and computes the
top <code>nTopImportance</code> features based on either Mean Decrease Accuracy or Mean Decrease Gini.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">#Example usage of the function</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">get_rf_model_output_cv_imp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  scores_df <span class="op">=</span> <span class="va">your_data</span>,</span></span>
<span class="r-in"><span>  Undersample <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  best.m <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  testReps <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  indeterminateUpper <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  indeterminateLower <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>  Type <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  nTopImportance <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#View performance metrics</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">performance_metrics</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#View top features by importance</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">feature_importance</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Md Aminul Islam Prodhan, Kevin Snyder.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

