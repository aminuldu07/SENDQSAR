<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>get_reprtree_from_rf_model Function Documentation • SENDQSAR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="get_reprtree_from_rf_model Function Documentation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SENDQSAR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/get_compile_data.html">get_compile_data</a></li>
    <li><a class="dropdown-item" href="../articles/get_bw_score.html">get_bw_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_livertobw_score.html">get_livertobw_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_lb_score.html">get_lb_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_mi_score.html">get_mi_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_liver_om_lb_mi_tox_score_list.html">get_liver_om_lb_mi_tox_score_list</a></li>
    <li><a class="dropdown-item" href="../articles/get_col_harmonized_scores_df.html">get_col_harmonized_scores_df</a></li>
    <li><a class="dropdown-item" href="../articles/get_ml_data_and_tuned_hyperparameters.html">get_ml_data_and_tuned_hyperparameters</a></li>
    <li><a class="dropdown-item" href="../articles/get_rf_model_with_cv.html">get_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_zone_exclusioned_rf_model_with_cv.html">get_zone_exclusioned_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_imp_features_from_rf_model_with_cv.html">get_imp_features_from_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_auc_curve_with_rf_model.html">get_auc_curve_with_rf_model</a></li>
    <li><a class="dropdown-item" href="../articles/get_histogram_barplot.html">get_histogram_barplot</a></li>
    <li><a class="dropdown-item" href="../articles/get_reprtree_from_rf_model.html">get_reprtree_from_rf_model</a></li>
    <li><a class="dropdown-item" href="../articles/get_prediction_plot.html">get_prediction_plot</a></li>
    <li><a class="dropdown-item" href="../articles/get_Data_formatted_for_ml_and_best.m.html">get_Data_formatted_for_ml_and_best.m</a></li>
    <li><a class="dropdown-item" href="../articles/get_rf_input_param_list_output_cv_imp.html">get_rf_input_param_list_output_cv_imp</a></li>
    <li><a class="dropdown-item" href="../articles/get_zone_exclusioned_rf_model_cv_imp.html">get_zone_exclusioned_rf_model_cv_imp</a></li>
    <li><a class="dropdown-item" href="../articles/get_repeat_dose_parallel_studyids.html">get_repeat_dose_parallel_studyids</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aminuldu07/SENDQSAR" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>get_reprtree_from_rf_model Function Documentation</h1>
                        <h4 data-toc-skip class="author">Your Name</h4>
            
            <h4 data-toc-skip class="date">2024-12-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/aminuldu07/SENDQSAR/blob/main/vignettes/get_reprtree_from_rf_model.Rmd" class="external-link"><code>vignettes/get_reprtree_from_rf_model.Rmd</code></a></small>
      <div class="d-none name"><code>get_reprtree_from_rf_model.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="purpose">Purpose<a class="anchor" aria-label="anchor" href="#purpose"></a>
</h2>
<p>The <code>get_reprtree_from_rf_model</code> function is designed to
train a Random Forest model on a provided dataset and generate a
representation tree (ReprTree) from the trained model. The function
supports various configurations for data preprocessing, model
hyperparameters, and sampling strategies, including random
undersampling. Additionally, it allows for error correction and
hyperparameter tuning.</p>
</div>
<div class="section level2">
<h2 id="input-parameters">Input Parameters<a class="anchor" aria-label="anchor" href="#input-parameters"></a>
</h2>
<p>The following table describes the input parameters for the
<code>get_reprtree_from_rf_model</code> function:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="11%">
<col width="71%">
<col width="9%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default Value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>Data</code></td>
<td>A dataset to train the Random Forest model. If NULL, data is fetched
using the <code>get_Data_formatted_for_ml_and_best.m</code>
function.</td>
<td>Data frame</td>
<td>NULL</td>
</tr>
<tr class="even">
<td><code>path_db</code></td>
<td>The path to the database used for fetching or processing the
data.</td>
<td>Character string</td>
<td>-</td>
</tr>
<tr class="odd">
<td><code>rat_studies</code></td>
<td>A flag indicating whether rat studies are used.</td>
<td>Boolean (TRUE/FALSE)</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td><code>studyid_metadata</code></td>
<td>Metadata related to study IDs.</td>
<td>Data frame</td>
<td>NULL</td>
</tr>
<tr class="odd">
<td><code>fake_study</code></td>
<td>A flag indicating whether to use fake study data.</td>
<td>Boolean (TRUE/FALSE)</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td><code>use_xpt_file</code></td>
<td>A flag to indicate whether to use the XPT file format for data
input.</td>
<td>Boolean (TRUE/FALSE)</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>Round</code></td>
<td>A flag to round the data before processing.</td>
<td>Boolean (TRUE/FALSE)</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td><code>Impute</code></td>
<td>A flag to specify whether to impute missing values in the data.</td>
<td>Boolean (TRUE/FALSE)</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>reps</code></td>
<td>The number of repetitions to perform for cross-validation or
resampling.</td>
<td>Integer</td>
<td>-</td>
</tr>
<tr class="even">
<td><code>holdback</code></td>
<td>The fraction of data to hold back for testing.</td>
<td>Numeric</td>
<td>-</td>
</tr>
<tr class="odd">
<td><code>Undersample</code></td>
<td>A flag indicating whether undersampling should be applied to balance
the dataset.</td>
<td>Boolean (TRUE/FALSE)</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td><code>hyperparameter_tuning</code></td>
<td>A flag indicating whether hyperparameter tuning should be
performed.</td>
<td>Boolean (TRUE/FALSE)</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>error_correction_method</code></td>
<td>The method for error correction; valid options are
<code>'Flip'</code>, <code>'Prune'</code>, or <code>'None'</code>.</td>
<td>Character string</td>
<td>-</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p>The function generates a representation tree (ReprTree) from the
trained Random Forest model and visualizes the first tree (k=5) from the
model.</p>
<ul>
<li>A plot of the first tree from the Random Forest is displayed.</li>
<li>The representation tree object is generated but not explicitly
returned.</li>
</ul>
</div>
<div class="section level2">
<h2 id="key-steps">Key Steps<a class="anchor" aria-label="anchor" href="#key-steps"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Data Preparation:</strong>
<ul>
<li>If the <code>Data</code> parameter is <code>NULL</code>, the
function calls <code>get_Data_formatted_for_ml_and_best.m</code> to
prepare the data for modeling.</li>
<li>Data is split into training and testing sets (70% for training and
30% for testing).</li>
<li>If undersampling is enabled (<code>Undersample = TRUE</code>),
positive and negative samples are balanced in the training set by
undersampling the majority class.</li>
</ul>
</li>
<li>
<strong>Model Training:</strong>
<ul>
<li>A Random Forest model is trained using the <code>randomForest</code>
function. The target variable is <code>Target_Organ</code>, and the
model uses the best hyperparameter (<code>best.m</code>) determined
beforehand.</li>
<li>The number of trees in the forest is set to 500, and proximity
calculations are enabled.</li>
</ul>
</li>
<li>
<strong>ReprTree Generation:</strong>
<ul>
<li>A ReprTree is generated using the <code><a href="https://rdrr.io/pkg/reprtree/man/ReprTree.html" class="external-link">reprtree::ReprTree</a></code>
function, which creates a representation of the trained Random Forest
model.</li>
<li>The first tree (k=5) is plotted using
<code><a href="https://rdrr.io/pkg/reprtree/man/plot.getTree.html" class="external-link">reprtree::plot.getTree</a></code>.</li>
</ul>
</li>
<li>
<strong>Visualization:</strong>
<ul>
<li>The first tree in the Random Forest model is visualized using the
<code><a href="https://rdrr.io/pkg/reprtree/man/plot.getTree.html" class="external-link">reprtree::plot.getTree</a></code> function.</li>
</ul>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h2>
<p>```r get_reprtree_from_rf_model( Data = my_data, path_db =
“path/to/database”, rat_studies = TRUE, studyid_metadata = my_metadata,
fake_study = FALSE, use_xpt_file = TRUE, Round = TRUE, Impute = TRUE,
reps = 5, holdback = 0.3, Undersample = TRUE, hyperparameter_tuning =
FALSE, error_correction_method = “Flip” )</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Md Aminul Islam Prodhan, Kevin Snyder.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
