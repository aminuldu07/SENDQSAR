<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Documentation for `get_rf_input_param_list_output_cv_imp` Function • SENDQSAR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Documentation for `get_rf_input_param_list_output_cv_imp` Function">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SENDQSAR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/get_compile_data.html">get_compile_data</a></li>
    <li><a class="dropdown-item" href="../articles/get_bw_score.html">get_bw_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_livertobw_score.html">get_livertobw_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_lb_score.html">get_lb_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_mi_score.html">get_mi_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_liver_om_lb_mi_tox_score_list.html">get_liver_om_lb_mi_tox_score_list</a></li>
    <li><a class="dropdown-item" href="../articles/get_col_harmonized_scores_df.html">get_col_harmonized_scores_df</a></li>
    <li><a class="dropdown-item" href="../articles/get_ml_data_and_tuned_hyperparameters.html">get_ml_data_and_tuned_hyperparameters</a></li>
    <li><a class="dropdown-item" href="../articles/get_rf_model_with_cv.html">get_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_zone_exclusioned_rf_model_with_cv.html">get_zone_exclusioned_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_imp_features_from_rf_model_with_cv.html">get_imp_features_from_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_auc_curve_with_rf_model.html">get_auc_curve_with_rf_model</a></li>
    <li><a class="dropdown-item" href="../articles/get_histogram_barplot.html">get_histogram_barplot</a></li>
    <li><a class="dropdown-item" href="../articles/get_reprtree_from_rf_model.html">get_reprtree_from_rf_model</a></li>
    <li><a class="dropdown-item" href="../articles/get_prediction_plot.html">get_prediction_plot</a></li>
    <li><a class="dropdown-item" href="../articles/get_Data_formatted_for_ml_and_best.m.html">get_Data_formatted_for_ml_and_best.m</a></li>
    <li><a class="dropdown-item" href="../articles/get_rf_input_param_list_output_cv_imp.html">get_rf_input_param_list_output_cv_imp</a></li>
    <li><a class="dropdown-item" href="../articles/get_zone_exclusioned_rf_model_cv_imp.html">get_zone_exclusioned_rf_model_cv_imp</a></li>
    <li><a class="dropdown-item" href="../articles/get_repeat_dose_parallel_studyids.html">get_repeat_dose_parallel_studyids</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aminuldu07/SENDQSAR" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Documentation for `get_rf_input_param_list_output_cv_imp` Function</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/aminuldu07/SENDQSAR/blob/main/vignettes/get_rf_input_param_list_output_cv_imp.Rmd" class="external-link"><code>vignettes/get_rf_input_param_list_output_cv_imp.Rmd</code></a></small>
      <div class="d-none name"><code>get_rf_input_param_list_output_cv_imp.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="purpose">Purpose<a class="anchor" aria-label="anchor" href="#purpose"></a>
</h2>
<p>The <code>get_rf_input_param_list_output_cv_imp</code> function
prepares the necessary data for training and evaluating a Random Forest
(RF) model with cross-validation and variable importance scores. It
handles various configurations, such as imputation, hyperparameter
tuning, and the inclusion of rat studies. The function interacts with
either an XPT file or an SQLite database to extract and harmonize study
data, followed by model training and evaluation.</p>
</div>
<div class="section level2">
<h2 id="input-parameters">Input Parameters<a class="anchor" aria-label="anchor" href="#input-parameters"></a>
</h2>
<table class="table">
<colgroup>
<col width="12%">
<col width="6%">
<col width="74%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default Value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>path_db</code></td>
<td>character</td>
<td>Path to the SQLite database.</td>
<td>N/A</td>
</tr>
<tr class="even">
<td><code>rat_studies</code></td>
<td>logical</td>
<td>If <code>TRUE</code>, limits the studies to rat studies.</td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td><code>studyid_metadata</code></td>
<td>data.frame</td>
<td>A data frame containing metadata for the studies.</td>
<td>N/A</td>
</tr>
<tr class="even">
<td><code>fake_study</code></td>
<td>logical</td>
<td>If <code>TRUE</code>, uses a fake study for data processing.</td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td><code>use_xpt_file</code></td>
<td>logical</td>
<td>If <code>TRUE</code>, reads data from an XPT file instead of a
database.</td>
<td><code>FALSE</code></td>
</tr>
<tr class="even">
<td><code>Round</code></td>
<td>logical</td>
<td>If <code>TRUE</code>, rounds the liver scores.</td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td><code>Impute</code></td>
<td>logical</td>
<td>If <code>TRUE</code>, imputes missing values in the data.</td>
<td><code>FALSE</code></td>
</tr>
<tr class="even">
<td><code>reps</code></td>
<td>integer</td>
<td>Number of repetitions for model evaluation.</td>
<td>N/A</td>
</tr>
<tr class="odd">
<td><code>holdback</code></td>
<td>numeric</td>
<td>The proportion of data to hold back for validation.</td>
<td>N/A</td>
</tr>
<tr class="even">
<td><code>Undersample</code></td>
<td>logical</td>
<td>If <code>TRUE</code>, undersamples the data to balance the
classes.</td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td><code>hyperparameter_tuning</code></td>
<td>logical</td>
<td>If <code>TRUE</code>, tunes hyperparameters for the Random Forest
model.</td>
<td><code>FALSE</code></td>
</tr>
<tr class="even">
<td><code>error_correction_method</code></td>
<td>character</td>
<td>The error correction method. Options: ‘Flip’, ‘Prune’, or
‘None’.</td>
<td>N/A</td>
</tr>
<tr class="odd">
<td><code>best.m</code></td>
<td>numeric</td>
<td>A predefined value for the number of trees in the Random Forest
model. If <code>NULL</code>, the function will determine this
automatically.</td>
<td><code>NULL</code></td>
</tr>
<tr class="even">
<td><code>testReps</code></td>
<td>integer</td>
<td>Number of test repetitions for model evaluation.</td>
<td>N/A</td>
</tr>
<tr class="odd">
<td><code>indeterminateUpper</code></td>
<td>numeric</td>
<td>Upper threshold for indeterminate predictions.</td>
<td>N/A</td>
</tr>
<tr class="even">
<td><code>indeterminateLower</code></td>
<td>numeric</td>
<td>Lower threshold for indeterminate predictions.</td>
<td>N/A</td>
</tr>
<tr class="odd">
<td><code>Type</code></td>
<td>character</td>
<td>The type of Random Forest model to use. Options include
classification or regression models.</td>
<td>N/A</td>
</tr>
<tr class="even">
<td><code>nTopImportance</code></td>
<td>integer</td>
<td>The number of top important features to consider for the model.</td>
<td>N/A</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p>The function returns a Random Forest model trained with
cross-validation (CV) and includes a list of variable importance scores.
Specifically, it returns the result of the
<code>get_rf_model_with_cv</code> function, which includes the trained
model, cross-validation results, and feature importance scores.</p>
</div>
<div class="section level2">
<h2 id="key-steps">Key Steps<a class="anchor" aria-label="anchor" href="#key-steps"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Data Source Selection</strong>:
<ul>
<li>If <code>use_xpt_file</code> is <code>TRUE</code>, the function
loads data from an XPT file.</li>
<li>If <code>fake_study</code> is <code>TRUE</code>, it fetches data
from a SQLite database and filters based on
<code>rat_studies</code>.</li>
<li>If neither condition is met, it retrieves study IDs from the
database using <code>get_repeat_dose_parallel_studyids</code>.</li>
</ul>
</li>
<li>
<strong>Data Harmonization</strong>:
<ul>
<li>The function calls <code>get_liver_om_lb_mi_tox_score_list</code> to
calculate liver scores for the studies, which are then harmonized using
<code>get_col_harmonized_scores_df</code>.</li>
</ul>
</li>
<li>
<strong>Machine Learning Data Preparation</strong>:
<ul>
<li>The function prepares data for Random Forest model training by
calling <code>get_ml_data_and_tuned_hyperparameters</code>. This step
involves imputation, optional hyperparameter tuning, and data
balancing.</li>
</ul>
</li>
<li>
<strong>Random Forest Model Training and Evaluation</strong>:
<ul>
<li>The function calls <code>get_rf_model_with_cv</code> to train and
evaluate the Random Forest model with cross-validation. The model’s
performance is evaluated across multiple repetitions
(<code>testReps</code>), with the option to include top importance
features.</li>
</ul>
</li>
<li>
<strong>Error Correction</strong>:
<ul>
<li>If specified, the function applies an error correction method
(either “Flip”, “Prune”, or “None”).</li>
</ul>
</li>
<li>
<strong>Return</strong>:
<ul>
<li>The function returns the trained Random Forest model along with
cross-validation results and feature importance scores.</li>
</ul>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h2>
<p>```r result &lt;- get_rf_input_param_list_output_cv_imp( path_db =
“path/to/database”, rat_studies = TRUE, studyid_metadata = metadata_df,
fake_study = FALSE, use_xpt_file = FALSE, Round = TRUE, Impute = TRUE,
reps = 10, holdback = 0.2, Undersample = TRUE, hyperparameter_tuning =
TRUE, error_correction_method = “Flip”, best.m = NULL, testReps = 5,
indeterminateUpper = 0.9, indeterminateLower = 0.1, Type =
“classification”, nTopImportance = 10 )</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Md Aminul Islam Prodhan, Kevin Snyder.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
