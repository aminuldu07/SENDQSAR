<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Documentation for `get_Data_formatted_for_ml_and_best.m` Function • SENDQSAR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Documentation for `get_Data_formatted_for_ml_and_best.m` Function">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SENDQSAR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/get_compile_data.html">get_compile_data</a></li>
    <li><a class="dropdown-item" href="../articles/get_bw_score.html">get_bw_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_livertobw_score.html">get_livertobw_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_lb_score.html">get_lb_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_mi_score.html">get_mi_score</a></li>
    <li><a class="dropdown-item" href="../articles/get_liver_om_lb_mi_tox_score_list.html">get_liver_om_lb_mi_tox_score_list</a></li>
    <li><a class="dropdown-item" href="../articles/get_col_harmonized_scores_df.html">get_col_harmonized_scores_df</a></li>
    <li><a class="dropdown-item" href="../articles/get_ml_data_and_tuned_hyperparameters.html">get_ml_data_and_tuned_hyperparameters</a></li>
    <li><a class="dropdown-item" href="../articles/get_rf_model_with_cv.html">get_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_zone_exclusioned_rf_model_with_cv.html">get_zone_exclusioned_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_imp_features_from_rf_model_with_cv.html">get_imp_features_from_rf_model_with_cv</a></li>
    <li><a class="dropdown-item" href="../articles/get_auc_curve_with_rf_model.html">get_auc_curve_with_rf_model</a></li>
    <li><a class="dropdown-item" href="../articles/get_histogram_barplot.html">get_histogram_barplot</a></li>
    <li><a class="dropdown-item" href="../articles/get_reprtree_from_rf_model.html">get_reprtree_from_rf_model</a></li>
    <li><a class="dropdown-item" href="../articles/get_prediction_plot.html">get_prediction_plot</a></li>
    <li><a class="dropdown-item" href="../articles/get_Data_formatted_for_ml_and_best.m.html">get_Data_formatted_for_ml_and_best.m</a></li>
    <li><a class="dropdown-item" href="../articles/get_rf_input_param_list_output_cv_imp.html">get_rf_input_param_list_output_cv_imp</a></li>
    <li><a class="dropdown-item" href="../articles/get_zone_exclusioned_rf_model_cv_imp.html">get_zone_exclusioned_rf_model_cv_imp</a></li>
    <li><a class="dropdown-item" href="../articles/get_repeat_dose_parallel_studyids.html">get_repeat_dose_parallel_studyids</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aminuldu07/SENDQSAR" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Documentation for `get_Data_formatted_for_ml_and_best.m` Function</h1>
                        <h4 data-toc-skip class="author">Your Name</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/aminuldu07/SENDQSAR/blob/main/vignettes/get_Data_formatted_for_ml_and_best.m.Rmd" class="external-link"><code>vignettes/get_Data_formatted_for_ml_and_best.m.Rmd</code></a></small>
      <div class="d-none name"><code>get_Data_formatted_for_ml_and_best.m.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="purpose">Purpose<a class="anchor" aria-label="anchor" href="#purpose"></a>
</h3>
<p>The function <code>get_Data_formatted_for_ml_and_best.m</code> is
designed to retrieve and preprocess data for machine learning (ML)
models from a given SQLite database or XPT file. It performs several
tasks such as fetching study IDs, retrieving study metadata, calculating
liver toxicity scores, and tuning hyperparameters for ML models. The
final output is a list containing processed data ready for machine
learning and the best model.</p>
</div>
<div class="section level3">
<h3 id="input-parameters">Input Parameters<a class="anchor" aria-label="anchor" href="#input-parameters"></a>
</h3>
<table class="table">
<colgroup>
<col width="19%">
<col width="57%">
<col width="9%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default Value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>path_db</code></td>
<td>Path to the SQLite database or XPT file location.</td>
<td>character</td>
<td>None</td>
</tr>
<tr class="even">
<td><code>rat_studies</code></td>
<td>Flag to filter for rat studies.</td>
<td>logical</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>studyid_metadata</code></td>
<td>Optional metadata for study IDs. If NULL, will be generated.</td>
<td>data.frame</td>
<td>NULL</td>
</tr>
<tr class="even">
<td><code>fake_study</code></td>
<td>Flag to use fake study data.</td>
<td>logical</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>use_xpt_file</code></td>
<td>Flag to indicate whether to use an XPT file instead of SQLite
database.</td>
<td>logical</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td><code>Round</code></td>
<td>Flag to round liver toxicity scores.</td>
<td>logical</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>Impute</code></td>
<td>Flag to impute missing values in the dataset.</td>
<td>logical</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td><code>reps</code></td>
<td>Number of repetitions for cross-validation.</td>
<td>integer</td>
<td>None</td>
</tr>
<tr class="odd">
<td><code>holdback</code></td>
<td>Fraction of data to hold back for validation.</td>
<td>numeric</td>
<td>None</td>
</tr>
<tr class="even">
<td><code>Undersample</code></td>
<td>Flag to undersample the majority class.</td>
<td>logical</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>hyperparameter_tuning</code></td>
<td>Flag to perform hyperparameter tuning for the model.</td>
<td>logical</td>
<td>FALSE</td>
</tr>
<tr class="even">
<td><code>error_correction_method</code></td>
<td>Method to handle error correction. Must be one of ‘Flip’, ‘Prune’,
or ‘None’.</td>
<td>character</td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h3>
<p>The function returns a list with the following elements:</p>
<ul>
<li>
<code>Data</code>: A data frame containing the preprocessed data
ready for machine learning.</li>
<li>
<code>best.m</code>: The best machine learning model after
hyperparameter tuning, if applicable.</li>
</ul>
</div>
<div class="section level3">
<h3 id="key-steps">Key Steps<a class="anchor" aria-label="anchor" href="#key-steps"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Fetch Study IDs</strong>:
<ul>
<li>If <code>use_xpt_file</code> is <code>TRUE</code>, it retrieves
study IDs from directories within the specified path.</li>
<li>If <code>use_xpt_file</code> is <code>FALSE</code> and
<code>fake_study</code> is <code>TRUE</code>, the function connects to
an SQLite database and retrieves the study IDs from the ‘dm’ table.</li>
<li>If <code>fake_study</code> is <code>FALSE</code>, it fetches
repeat-dose and parallel study IDs from the database.</li>
</ul>
</li>
<li>
<strong>Process Study Metadata</strong>:
<ul>
<li>If <code>studyid_metadata</code> is not provided, it generates
metadata by selecting unique study IDs and assigning random
“Target_Organ” values (either “Liver” or “not_Liver”).</li>
</ul>
</li>
<li>
<strong>Calculate Liver Toxicity Scores</strong>:
<ul>
<li>The function calculates liver toxicity scores using the
<code>get_liver_om_lb_mi_tox_score_list</code> function.</li>
</ul>
</li>
<li>
<strong>Harmonize Scores</strong>:
<ul>
<li>The calculated liver toxicity scores are harmonized using the
<code>get_col_harmonized_scores_df</code> function, optionally rounding
them based on the <code>Round</code> parameter.</li>
</ul>
</li>
<li>
<strong>Machine Learning Data Preparation</strong>:
<ul>
<li>The function prepares the data for machine learning and performs
hyperparameter tuning (if <code>hyperparameter_tuning</code> is
<code>TRUE</code>) using the
<code>get_ml_data_and_tuned_hyperparameters</code> function.</li>
</ul>
</li>
<li>
<strong>Return Processed Data and Best Model</strong>:
<ul>
<li>The final output consists of the processed data and the best machine
learning model (<code>best.m</code>).</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h3>
<p>```r result &lt;- get_Data_formatted_for_ml_and_best.m( path_db =
“path/to/database.db”, rat_studies = TRUE, reps = 5, holdback = 0.2,
error_correction_method = “Flip” )</p>
</div>
<div class="section level2">
<h2 id="access-the-processed-data-and-the-best-model">Access the processed data and the best model<a class="anchor" aria-label="anchor" href="#access-the-processed-data-and-the-best-model"></a>
</h2>
<p>processed_data &lt;-
result<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>a</mi><mi>t</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mi>m</mi></msub><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo>&lt;</mo><mo>−</mo><mi>r</mi><mi>e</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Data
best_model &lt;- result</annotation></semantics></math>best.m</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Md Aminul Islam Prodhan, Kevin Snyder.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
