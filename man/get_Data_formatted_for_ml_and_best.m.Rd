% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_Data_formatted_for_ml_and_best.m.R
\name{get_Data_formatted_for_ml_and_best.m}
\alias{get_Data_formatted_for_ml_and_best.m}
\title{Retrieve and Preprocess Data for Machine Learning Models}
\usage{
get_Data_formatted_for_ml_and_best.m(
  path_db,
  rat_studies = FALSE,
  studyid_metadata = NULL,
  fake_study = FALSE,
  use_xpt_file = FALSE,
  Round = FALSE,
  Impute = FALSE,
  reps,
  holdback,
  Undersample = FALSE,
  hyperparameter_tuning = FALSE,
  error_correction_method
)
}
\arguments{
\item{path_db}{A character string representing the path to the SQLite database or XPT file.}

\item{rat_studies}{A logical flag to filter for rat studies (default is FALSE).}

\item{studyid_metadata}{A data frame containing metadata for the study IDs. If NULL, metadata is generated (default is NULL).}

\item{fake_study}{A logical flag to use fake study data (default is FALSE).}

\item{use_xpt_file}{A logical flag to indicate whether to use an XPT file instead of a SQLite database (default is FALSE).}

\item{Round}{A logical flag to round liver toxicity scores (default is FALSE).}

\item{Impute}{A logical flag to impute missing values in the dataset (default is FALSE).}

\item{reps}{An integer specifying the number of repetitions for cross-validation.}

\item{holdback}{A numeric value indicating the fraction of data to hold back for validation.}

\item{Undersample}{A logical flag to undersample the majority class (default is FALSE).}

\item{hyperparameter_tuning}{A logical flag to perform hyperparameter tuning (default is FALSE).}

\item{error_correction_method}{A character string specifying the error correction method. Must be one of 'Flip', 'Prune', or 'None'.}
}
\value{
A list containing:
\item{Data}{A data frame containing the preprocessed data ready for machine learning.}
\item{best.m}{The best machine learning model after hyperparameter tuning, if applicable.}
}
\description{
This function processes data from a given SQLite database or XPT file, calculates liver toxicity scores, and prepares data for machine learning models.
It can also tune hyperparameters and apply error correction methods.
}
\details{
This function performs several key steps:
\itemize{
\item Retrieves study IDs from an SQLite database or XPT file.
\item Generates or uses provided study metadata, including a random assignment of "Target_Organ" values (either "Liver" or "not_Liver").
\item Calculates liver toxicity scores using the \code{get_liver_om_lb_mi_tox_score_list} function.
\item Harmonizes the calculated scores using the \code{get_col_harmonized_scores_df} function.
\item Prepares the data for machine learning and tunes hyperparameters (if enabled) using the \code{get_ml_data_and_tuned_hyperparameters} function.
\item Returns the processed data and the best model.
}
}
\examples{
\dontrun{
result <- get_Data_formatted_for_ml_and_best.m(
  path_db = "path/to/database.db",
  rat_studies = TRUE,
  reps = 5,
  holdback = 0.2,
  error_correction_method = "Flip"
)

# Access the processed data and the best model
processed_data <- result$Data
best_model <- result$best.m
}

}
